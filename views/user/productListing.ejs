<%- include("./partials/header") %>

<link rel="stylesheet" href="/css/collection.css">

<div class="container collection-page">

    <div class="row">

        <!-- ======================
             SIDEBAR
        ======================= -->
        <div class="col-md-3 sidebar">

            <!-- Categories -->
            <div class="filter-section">
                <h5>Categories</h5>

                <p class="filter-title">Shop For</p>
                <div class="filter-options">
                    <label><input type="checkbox" name="gender" value="men"> Men</label><br>
                    <label><input type="checkbox" name="gender" value="women"> Women</label><br>
                    <label><input type="checkbox" name="gender" value="unisex"> Unisex</label>
                </div>
            </div>

            <!-- Brand -->
            <div class="filter-section">
                <p class="filter-title">Brand</p>
                <div class="filter-options">
                    <% if (brands && brands.length) { %>
                        <% brands.forEach(b => { %>
                            <label>
                                <input type="checkbox" name="brand" value="<%= b._id %>">
                                <%= b.name %>
                            </label><br>
                        <% }) %>
                    <% } %>
                </div>
            </div>

            <!-- Price -->
            <div class="filter-section">
                <p class="filter-title">Price</p>
                <div class="price-range">
                    <input type="number" id="minPrice" placeholder="Min">
                    <input type="number" id="maxPrice" placeholder="Max">
                    <button class="btn btn-sm btn-dark mt-2">Apply</button>
                </div>
            </div>

        </div> <!-- /sidebar -->

        <!-- ======================
             MAIN CONTENT
        ======================= -->
        <div class="col-md-9">

            <!-- Search + Sort -->
            <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="search-box">
                    <input type="text" class="form-control" placeholder="Search by name">
                </div>

                <select class="form-select sort-select">
                    <option value="">Sort</option>
                    <option value="low-high">Price: Low to High</option>
                    <option value="high-low">Price: High to Low</option>
                    <option value="newest">Newest</option>
                </select>
            </div>

            <!-- Banner -->
            <div class="banner mb-4">
                <img src="/images/banner.jpg" class="img-fluid rounded">
            </div>

            <!-- Product Grid -->
            <div class="row product-grid">

                <% if (products && products.length > 0) { %>

                    <% products.forEach(product => { %>
                        <div class="col-md-4 col-sm-6 mb-4">
                            <div class="product-card">

                                <!-- Wishlist Icon -->
                                <span class="wishlist-icon">
                                    <i class="fa-regular fa-heart"></i>
                                </span>

                                <!-- Product Image -->
                                <a href="/product/<%= product._id %>">
                                    <img src="<%= product.images[0] %>" class="product-img">
                                </a>

                                <div class="product-info mt-2">
                                    <h6><%= product.name %></h6>
                                    <p class="brand-name"><%= product.brand.name %></p>
                                    <p class="price">â‚¹<%= product.price %></p>
                                </div>
                            </div>
                        </div>
                    <% }) %>

                <% } else { %>

                    <p>No products found.</p>

                <% } %>

            </div>

            <!-- Load More -->
            <div class="text-center mt-4 mb-5">
                <button class="btn btn-outline-dark load-more-btn">Load More</button>
            </div>

        </div> 
    </div>
</div>

<%- include("./partials/footer") %>
