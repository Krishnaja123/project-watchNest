<%- include("../partials/user/header") %>

    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

        <style>
            .thumb-img {
                width: 70px;
                height: 70px;
                object-fit: cover;
                cursor: pointer;
                border: 1px solid #ddd;
                margin-bottom: 10px;
            }

            .thumb-img.active {
                border: 2px solid #000;
            }

            .main-img {
                width: 100%;
                max-height: 420px;
                object-fit: contain;
            }

            .variant-btn {
                border: 1px solid #ccc;
                padding: 6px 14px;
                margin-right: 8px;
                border-radius: 6px;
                cursor: pointer;
                background: #fff;
            }

            .variant-btn.active {
                border-color: #000;
                font-weight: 600;
            }

            .price {
                font-size: 24px;
                font-weight: bold;
            }

            .old-price {
                text-decoration: line-through;
                color: gray;
                margin-left: 10px;
            }
        </style>
    </head>

    <body>
        <div class="container my-5">

            <div class="row">
                <!-- LEFT IMAGE SECTION -->
                <div class="col-md-6 d-flex">

                    <!-- THUMBNAILS -->
                    <div class="me-3">
                        <% product.images.forEach((img, index)=> { %>
                            <img src="<%= img %>" class="thumb-img <%= index === 0 ? 'active' : '' %>"
                                onclick="changeImage('<%= img %>', this)" />
                            <% }) %>
                    </div>

                    <!-- MAIN IMAGE -->
                    <div class="flex-grow-1">
                        <img id="mainImage" src="<%= product.images[0] %>" class="main-img" />

                        <!-- VARIANTS BELOW IMAGE -->
                        <div class="mt-4">
                            <h6>Available Variants</h6>
                            <% product.variants.forEach((variant, index)=> { %>
                                <span class="variant-btn <%= index === 0 ? 'active' : '' %>">
                                    <%= variant %>
                                </span>
                                <% }) %>
                        </div>
                    </div>
                </div>

                <!-- RIGHT PRODUCT DETAILS -->
                <div class="col-md-6">
                    <h2>
                        <%= product.name %>
                    </h2>

                    <p class="text-muted">
                        ⭐ <%= product.rating %> | <%= product.reviews %> reviews
                    </p>

                    <p class="price">
                        ₹<%= product.price %>
                            <span class="old-price">₹<%= product.oldPrice %></span>
                            <span class="text-success fs-6">
                                <%= product.discount %>% off
                            </span>
                    </p>

                    <hr />

                    <p><strong>Category:</strong>
                        <%= product.category %>
                    </p>
                    <p><strong>Brand:</strong>
                        <%= product.brand %>
                    </p>

                    <p class="mt-3">
                        <%= product.description %>
                    </p>

                    <div class="mt-4">
                        <button class="btn btn-danger px-4">Buy Now</button>
                        <button class="btn btn-success px-4 ms-2">Add To Cart</button>
                    </div>
                </div>
            </div>

            <!-- SIMILAR COLLECTION -->
            <div class="mt-5">
                <h4>Similar Collection</h4>

                <div class="row mt-3">
                    <% similarProducts.forEach(item=> { %>
                        <div class="col-md-3">
                            <div class="card">
                                <img src="<%= item.image %>" class="card-img-top" />
                                <div class="card-body text-center">
                                    <h6>
                                        <%= item.name %>
                                    </h6>
                                    <p>₹<%= item.price %>
                                    </p>
                                </div>
                            </div>
                        </div>
                        <% }) %>
                </div>
            </div>

            <%- include("../partials/user/footer") %>

        </div>

        <script>
            function changeImage(src, element) {
                document.getElementById("mainImage").src = src;

                document.querySelectorAll(".thumb-img").forEach(img => {
                    img.classList.remove("active");
                });

                element.classList.add("active");
            }
        </script>
    </body>

    </html>